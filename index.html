<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly GDL Authoring Demo</title>
  <script src="./blockly/blockly_compressed.js"></script>
  <script src="./blockly/javascript_compressed.js"></script>
  <script src="./blockly/en.js"></script>
  <script src="./gdl_blocks.js"></script>
  <style>
  html, body {
    height: 100%;
  }
  body {
    background-color: #fff;
    font-family: sans-serif;
    margin: 0 5px;
    overflow: hidden
  }
  h1 {
    font-weight: normal;
    font-size: 140%;
  }
  h3 {
    margin-top: 5px;
    margin-bottom: 0;
  }
  table {
    height: 100%;
    width: 100%;
  }
  td {
    vertical-align: top;
    padding: 0;
  }
  </style>
</head>
<body>
  <h1>
    <p>Simple demo of GDL authoring using Blockly.</p>
    <table>
      <tr>
        <td width="50%" height="100%" style="padding: 2px;">
          <div id="blocklyDiv" style="height: 800px; width: 800px;" ></div>
        </td>
        <td width="50%" height="100%">
          <textarea id="textarea" rows="60" cols="80"></textarea>
        </td>
      </tr>
    </table>

    <xml id="toolbox" style="display: none">
      <!-- block type="guide_definition"></block>
      <block type="archetype_binding"></block>
      <block type="element_binding"></block -->
      <block type="rule"></block>
      <block type="unary_expression"></block>
      <block type="binary_expression"></block>
      <block type="assignment_expression"></block>
      <block type="function_expression"></block>
      <block type="numeric_constant"></block>
      <block type="string_constant"></block>
      <block type="boolean_constant"></block>
      <block type="variable"></block>
    </xml>

    <script>
      var workspace = Blockly.inject(
        'blocklyDiv',
        {
          media: './media/',
          toolbox: document.getElementById('toolbox')
        }
      );

      function myUpdateFunction(event) {
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        document.getElementById('textarea').value = code;
      }
      workspace.addChangeListener(myUpdateFunction);
    </script>

  </body>
  </html>
